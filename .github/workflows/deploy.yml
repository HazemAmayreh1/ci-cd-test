name: Deploy to Railway

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Install Railway CLI
        run: npm i -g @railway/cli

      - name: Deploy to Railway
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
        run: |
          railway up \
            --project d8c6fb0d-ceea-495d-90c6-8fd31c9bdd84 \
            --environment bf16088a-d3d9-4f6f-9a8c-0d844e325d38 \
            --service 91142f2f-e4d0-4ac8-9384-26eb21b07ee1 \
          || true
